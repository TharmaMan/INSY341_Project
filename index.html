<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Maps Web App</title>
  <script src="https://cdn.firebase.com/js/client/2.2.7/firebase.js"></script>
</head>
<body>

  <h1>INSY 341 Maps Project</h1>

<!-- Added Google Maps API -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyChN1QpuN4ctuByivuzOLWDnwWuGFrCwes&callback=initMap"
  type="text/javascript">
  
  </script>

<h3>
   Venue
</h3>
<input type = 'text' id = 'name'> <br>
<h3>
  Address
</h3>
<input type = 'text' id = 'address'> <br>
<button onclick = "addData(jsonObj);"> Add </button>



<script>
  var jsonObj=
          [
            {
              address: "document.getElementById('address').value",
              name: "document.getElementById('name').value"
            }
          ]


  // Declared a global variable which links to the Firebase object
  var databaseLocation = new Firebase('https://insy341app.firebaseio.com')

  function addData(obj){
    databaseLocation.push(obj);
    alert("data saved");
    // in real app need to use firebase API to get this confirmation
  }

  var venueArray = []


  var productArray=[];

  function readData (){
    //whenever the data changes, put the data into an array called productArray  and then
    //call a function displayData to show the information in this array
    databaseLocation.on("value", function(snapshot) {

      console.log("got snapshot of all objects at this point in time");
      snapshot.forEach(function(databaseLocation){
        productArray.push(databaseLocation.val());

      });
      //alert(JSON.stringify(productArray));
      displayData(productArray);
    });
  }

  function displayData(arr){

    result="";

    for (var i=0;i<arr[0].length;i++){
      //alert(arr[0][i].name);
      result=result+arr[0][i].name+"<br>";
    }
    document.getElementById("demo").innerHTML=result;

  }

readData();

</script>


<div id = 'demo'>
  <br> locations
</div>

<!--
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script>
// Initialize Firebase
var config = {
apiKey: "AIzaSyAEE88YnS0l_xNAt6atwGU_aoJvMHq9UQY",
authDomain: "insy341app.firebaseapp.com",
databaseURL: "https://insy341app.firebaseio.com",
projectId: "insy341app",
storageBucket: "insy341app.appspot.com",
messagingSenderId: "710447679757"
};
firebase.initializeApp(config);
</script>
-->


</body>

</html>

